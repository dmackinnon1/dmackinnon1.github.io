<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<title>Numbrix</title>
</head>

<style>
table, th, td {
	padding: 4px;
	text-align: center;
    border: 1px solid black;
    border-collapse: collapse; 
}
svg {
	display: block; 
	margin: auto ;
	border: 1px solid black;
}
</style>
</head>
<script src="js/evnts.js"></script> <!-- required for callback registration-->
<script src="js/bldrs.js"></script> <!-- required for html/svg building -->
<script src="js/kixote_base.js"></script>
<script src="js/kixote_hidato.js"></script>
<script>

function loadBoard() {
	gameType.type = "numbrix"; 
	gameType.difficulty = 2;
	game= new Game(gameBoard);
	game.init();
	if (game.isIncomplete()) {
		console.log("debug: " + game);
	}
	return htmlForBoard(game.getBoard());
};

$(document).ready(function(){
    $("#refresh").on("click", function(event){
		console.log("refresh button clicked");
		$("#boardDisplay").html(loadBoard());
		game.startGame();
	});	
});

/*
* The page registers callbacks to have its elements
* refreshed when things change. These pull what they
* require from the gameDisplay object.
*/
$(document).ready(function(){
    evnts.addCallback("refreshMap", function() {
		$("#mapDisplay").html(gameDisplay.map);
    });
    evnts.addCallback("refreshStatus", function() {
		$("#finish").html(gameDisplay.statusMessage);
    });
    evnts.addCallback("refreshSteps", function() {
		$("#missteps").html(gameDisplay.missteps);
    });
    //after callbacks are registered, we start the game
    $("#boardDisplay").html(loadBoard());
    game.startGame();
});


</script>

<nav class="navbar navbar-default" style="margin-bottom:0px">
	<div class="container-fluid">
		<div class="navbar-header">
			<a class="navbar-brand" href="..">
				<img src="imgs/github_badge1.png" style="max-width:100%;max-height:100%" >
			</a>
			<p class="navbar-text navbar-right">
				<a href=".." class="navbar-link">dmackinnon1.github.io</a>
			</p>
		</div>
		</div>
</nav>
<div class="container-fluid">
<div class='row'>
<div class='col-sm-1'>
</div>
<div class='col-sm-10'>
<div class="page-header">
	<h1>Numbrix <small>Wandering through the von Neumann neighbourhood</small></h1>
</div> 	

<button type='button' class='btn btn-info' data-toggle='collapse' data-target='#full'>
About </button>
<div id='full' class='collapse '>
<br><hr>
<div class="media">
  <a class="media-left media-middle" href="#">
    <img class="media-object" src="imgs/5_5.png" alt="5x5 chess board" width="150" height="150">
  </a>
  <div class="media-body">
    <h4 class="media-heading">Numbrix Puzzles</h4>
    Official Numbrix puzzles are authored by <a href="https://en.wikipedia.org/wiki/Marilyn_vos_Savant">Marylin von Savant</a> and appear in Parade magazine. The puzzles on this page are not true Numbrix puzzles, but are
    a randomly generated version that provide more clues, included here because of the similarity between them and knight and kings tour puzzles. Like the other 'tour' puzzles, you need to trace a path over the whole board, touching each square only once. In the numbrix case, you are restricted to moving only up, down, left and right - not along the diagonals, and certainly not jumping around like a knight. The cells at the four directions are 
    sometimes referred to as the '<a href="https://en.wikipedia.org/wiki/Von_Neumann_neighborhood">von Neumann neighbourhood</a>' when used in describing cellular automata.
 </div>
</div>
<br>
<hr><br>
</div>

<button id="refresh" class="btn btn-default">New Puzzle</button>
<div id="finish" style="text-align=center"></div>
<hr>
<h3><div id="boardDisplay" style="text-align=center">
</div>
</h3>
<hr>
<div id="missteps" style="text-align=center"></div>
<hr>
<div id="mapDisplay" style="text-align=center"></div>
<hr>

</div>
<div class='col-sm-1'>
</div>


</body>

</html>
